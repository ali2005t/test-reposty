<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅูุดุงุก ุฃููุงุฏ ุชูุนูู - Ta3leemy</title>

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/teacher/generate-codes.css">
    <link rel="stylesheet" href="../assets/css/print.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <!-- Hidden Print Area -->
    <div id="print-area"></div>

    <div class="dashboard-layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header"><a href="#" class="logo">Ta3leemy</a></div>
            <div class="sidebar-menu">
                <div class="menu-item" onclick="window.location.href='dashboard.html'"><i class="fas fa-home"></i>
                    ุงูุฑุฆูุณูุฉ</div>
                <div class="menu-item" onclick="window.location.href='trainings.html'"><i
                        class="fas fa-layer-group"></i> ุงูุฏูุฑุงุช</div>
                <div class="menu-item" onclick="window.location.href='lectures.html'"><i class="fas fa-video"></i>
                    ุงููุญุงุถุฑุงุช</div>
                <div class="menu-item" onclick="window.location.href='students.html'"><i class="fas fa-users"></i>
                    ุงูุทูุงุจ</div>
                <div class="menu-item active"><i class="fas fa-barcode"></i> ุงูุฃููุงุฏ</div>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div style="display:flex; align-items:center; gap:10px;">
                    <button class="btn-icon mobile-only" id="open-sidebar"><i class="fas fa-bars"></i></button>
                    <h3>ุฅูุดุงุก ุฃููุงุฏ ุชูุนูู</h3>
                </div>
            </header>

            <div class="page-content">

                <div class="card">
                    <div
                        style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:1rem;">
                        <h4 style="margin:0;">โจ ุชูููุฏ ุฃููุงุฏ ุฌุฏูุฏุฉ</h4>
                        <span style="font-size:0.9rem; color:#64748b;">ูู ุจุฅูุดุงุก ูุฑูุช ุดุญู ูููุงุชูุญ ูุตูู ููุทูุงุจ</span>
                    </div>

                    <form id="generate-codes-form">

                        <div class="form-grid-2">
                            <div class="form-group">
                                <label class="form-label">ููุน ุงูููุฏ *</label>
                                <select id="code-type" class="form-input">
                                    <option value="training">ุฏูุฑุฉ ุชุฏุฑูุจูุฉ ูุงููุฉ (Course)</option>
                                    <option value="unit">ูุญุฏุฉ / ูุตู (Unit)</option>
                                    <option value="lecture">ูุญุงุถุฑุฉ / ููุฏูู (Lecture)</option>
                                    <option value="exam">ุงูุชุญุงู (Exam)</option>
                                    <option value="book">ููุฒูุฉ / ูุชุงุจ (Book)</option>
                                    <option value="wallet">ุดุญู ุฑุตูุฏ (Cash)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">ุนุฏุฏ ุงูุฃููุงุฏ ุงููุทููุจุฉ</label>
                                <input type="number" id="code-quantity" class="form-input" min="1" max="100" value="10"
                                    required>
                            </div>
                        </div>

                        <!-- Extra Options Row -->
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label class="form-label">ุชุงุฑูุฎ ุงูุงููุงุก (Expiry)</label>
                                <input type="date" id="code-expiry" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ุณุนุฑ ุงูููุฏ (ุฌ.ู)</label>
                                <input type="number" id="code-price-input" class="form-input" placeholder="0.00"
                                    value="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ููู ุงููุงุฑุช (ููุทุจุงุนุฉ)</label>
                            <div
                                style="display:flex; align-items:center; gap:15px; background:rgba(255,255,255,0.03); padding:10px; border-radius:10px;">
                                <input type="color" id="card-color-picker" value="#22c55e"
                                    style="height:40px; width:80px; cursor:pointer;">
                                <span style="font-size:0.9rem; color:#94a3b8;">ุงุฎุชุฑ ููู ุงููุฑูุช ุงููููุฒ</span>
                            </div>
                        </div>

                        <hr style="border:0; border-top:1px dashed rgba(255,255,255,0.1); margin: 1.5rem 0;">

                        <!-- Content Selectors -->
                        <div class="form-group" id="group-training">
                            <label class="form-label">ุงุฎุชุฑ ุงูุฏูุฑุฉ ุงูุชุฏุฑูุจูุฉ</label>
                            <select id="select-training" class="form-input" required>
                                <option value="">ุฌุงุฑู ุงูุชุญููู...</option>
                            </select>
                        </div>

                        <!-- Unit Selection -->
                        <div class="form-group" id="group-unit" style="display:none;">
                            <label class="form-label">ุงุฎุชุฑ ุงูููุฑุณ (ุงููุญุฏุฉ)</label>
                            <select id="select-unit" class="form-input">
                                <option value="">ุงุฎุชุฑ ุงูุฏูุฑุฉ ุฃููุงู...</option>
                            </select>
                        </div>

                        <!-- Lecture Selection -->
                        <div class="form-group" id="group-lecture" style="display:none;">
                            <label class="form-label">ุงุฎุชุฑ ุงููุญุชูู (ูุญุงุถุฑุฉ / ุชูููู)</label>
                            <select id="select-lecture" class="form-input">
                                <option value="">ุงุฎุชุฑ ุงููุญุฏุฉ ุฃููุงู...</option>
                            </select>
                        </div>

                        <div class="form-footer" style="display:flex; justify-content:flex-end; margin-top: 2rem;">
                            <button type="submit" class="btn btn-primary" id="gen-btn"
                                style="width:100%; justify-content:center;">
                                <i class="fas fa-magic"></i> ุชูููุฏ ุงูุฃููุงุฏ ููุฑุงู
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Recent Batches -->
                <div class="search-bar-container">
                    <div
                        style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:10px;">
                        <h3 style="margin:0;">๐ ุณุฌู ุงูุฃููุงุฏ</h3>
                        <div style="display:flex; gap:10px;">
                            <button class="btn btn-secondary btn-sm" id="del-all-btn"
                                style="background:rgba(239,68,68,0.2); color:#fca5a5; border-color:rgba(239,68,68,0.3);">
                                <i class="fas fa-trash"></i> ุญุฐู ุงููู
                            </button>
                            <button class="btn btn-secondary btn-sm" id="print-btn">
                                <i class="fas fa-print"></i> ุทุจุงุนุฉ (Cards)
                            </button>
                        </div>
                    </div>
                    <div style="display:flex; gap:10px; margin-top:15px; flex-wrap:wrap;">
                        <input type="text" id="search-code" placeholder="ุจุญุซ ุนู ููุฏ..." class="form-input"
                            style="flex:1;">

                        <!-- Batch Filter -->
                        <select id="filter-batch" class="form-input" style="width:220px;">
                            <option value="all">ูู ุงููุฌููุนุงุช (All)</option>
                        </select>

                        <select id="filter-status" class="form-input" style="width:150px;">
                            <option value="all">ุงููู</option>
                            <option value="unused">ุบูุฑ ูุณุชุฎุฏู</option>
                            <option value="used">ูุณุชุฎุฏู</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ุงูููุฏ</th>
                                <th>ุงูููุน</th>
                                <th>ููุชุญ ูุญุชูู</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุชุงุฑูุฎ ุงูุชูููุฏ</th>
                                <th>ุงูุณุนุฑ</th>
                                <th>ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="codes-table-body">
                            <!-- JS Render -->
                        </tbody>
                    </table>
                    <div id="loading-indicator" class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุชุญููู...
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Template -->
    <template id="code-row-template">
        <tr>
            <td class="row-index">1</td>
            <td class="row-code"
                style="font-family:monospace; font-size:1.1rem; color:var(--primary-color); font-weight:bold;">Code</td>
            <td class="row-type">Type</td>
            <td class="row-target">Target Name</td>
            <td><span class="status-badge success row-status">Available</span></td>
            <td class="row-date">Date</td>
            <td class="row-price">0</td>
            <td>
                <button class="btn-icon-small copy-btn" title="ูุณุฎ"><i class="fas fa-copy"></i></button>
                <button class="btn-icon-small delete-btn" style="color:red;" title="ุญุฐู"><i
                        class="fas fa-trash"></i></button>
            </td>
        </tr>
    </template>

    <script type="module" src="../assets/js/firebase-config.js"></script>
    <script type="module" src="../assets/js/dashboard.js"></script>
    <script type="module" src="../assets/js/generate-codes.js"></script>
</body>

</html>