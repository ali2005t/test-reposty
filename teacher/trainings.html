<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الدورات التدريبية - Ta3leemy</title>

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div class="dashboard-layout">

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header"><a href="#" class="logo">Ta3leemy</a></div>
            <div class="sidebar-menu">
                <div class="menu-item" onclick="window.location.href='dashboard.html'"><i class="fas fa-home"></i>
                    الرئيسية</div>
                <div class="menu-item active" onclick="window.location.href='trainings.html'"><i
                        class="fas fa-layer-group"></i> الدورات</div>
                <div class="menu-item" onclick="window.location.href='lectures.html'"><i class="fas fa-video"></i>
                    المحاضرات</div>
                <div class="menu-item" onclick="window.location.href='exams.html'"><i
                        class="fas fa-clipboard-check"></i> الامتحانات</div>
                <div class="menu-item" onclick="window.location.href='exam-results.html'"><i class="fas fa-poll"></i>
                    النتائج والتصحيح</div>
                <div class="menu-item" onclick="window.location.href='students.html'"><i class="fas fa-users"></i>
                    الطلاب</div>
                <div class="menu-item" onclick="window.location.href='generate-codes.html'"><i
                        class="fas fa-barcode"></i> الأكواد</div>
                <div class="menu-item" onclick="window.location.href='manual-access.html'"><i
                        class="fas fa-lock-open"></i> فتح المحتوى للطالب</div>

                <!-- Accounts Submenu -->
                <div class="menu-item" onclick="toggleSubmenu('accounts-submenu')"
                    style="display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
                    <span><i class="fas fa-wallet"></i> الحسابات</span>
                    <i class="fas fa-chevron-down" style="font-size:0.8rem;"></i>
                </div>
                <div id="accounts-submenu" style="display:none; background:rgba(0,0,0,0.2); padding-right:15px;">
                    <div class="menu-item" onclick="window.location.href='permissions.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-file-invoice-dollar"></i> الأذونات
                    </div>
                    <div class="menu-item" onclick="window.location.href='invoices.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-file-invoice"></i> الفواتير</div>
                    <div class="menu-item" onclick="window.location.href='subscriptions.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-box-open"></i> الاشتراكات</div>
                </div>

                <div class="menu-item" onclick="window.location.href='app-settings.html'">
                    <i class="fas fa-mobile-alt"></i> تجهيز التطبيق
                </div>

                <div class="menu-item" onclick="window.location.href='support.html'"><i class="fas fa-headset"></i>
                    الدعم الفني</div>

                <!-- Settings Submenu -->
                <div class="menu-item" onclick="toggleSubmenu('settings-submenu')"
                    style="margin-top:auto; border-top:1px solid rgba(255,255,255,0.05); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
                    <span><i class="fas fa-cog"></i> الإعدادات</span>
                    <i class="fas fa-chevron-down" style="font-size:0.8rem;"></i>
                </div>
                <div id="settings-submenu"
                    style="display:none; background:rgba(0,0,0,0.2); padding-right:15px; margin-bottom:1rem;">
                    <div class="menu-item" onclick="window.location.href='settings.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-sliders-h"></i> إعدادات المنصة</div>
                    <div class="menu-item" onclick="window.location.href='notifications.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-bell"></i> الإشعارات</div>
                    <div class="menu-item" onclick="window.location.href='profile.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-user-circle"></i> الملف الشخصي</div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar-redesigned"
                style="display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; background: #0f172a; border-bottom: 1px solid #1e293b;">
                <!-- Right: Page Title -->
                <div class="header-title">
                    <h3 style="margin:0; color:white; font-size:1.2rem;">الدورات التدريبية</h3>
                    <p id="platform-name" style="margin:0; font-size:0.8rem; color:#94a3b8;">منصتي التعليمية</p>
                </div>

                <!-- Left: Actions -->
                <div class="top-actions" style="display:flex; align-items:center; gap:20px;">

                    <!-- Site Link -->
                    <a href="#" class="action-link mobile-hide" target="_blank" id="site-link"
                        style="color:#94a3b8; text-decoration:none; display:flex; align-items:center; gap:5px; transition:color 0.2s;">
                        <i class="fas fa-external-link-alt"></i> <span class="mobile-hide">الموقع</span>
                    </a>

                    <!-- Notifications -->
                    <div class="notification-container" style="position:relative;">
                        <div class="notification-bell" id="notif-bell-trigger"
                            style="cursor:pointer; position:relative;">
                            <i class="fas fa-bell" style="font-size:1.2rem; color:#94a3b8; transition:color 0.2s;"></i>
                            <span class="badge-count"
                                style="position:absolute; top:-8px; right:-5px; background:#ef4444; color:white; border-radius:50%; font-size:0.7rem; padding:2px 6px; border:2px solid #0f172a; display:none;">0</span>
                        </div>

                        <!-- Notifications Dropdown -->
                        <div class="custom-dropdown" id="notif-dropdown"
                            style="display:none; position:absolute; left:-10px; top:50px; background:#1e293b; border:1px solid #334155; border-radius:12px; width:320px; z-index:1000; box-shadow:0 20px 25px -5px rgba(0,0,0,0.3); overflow:hidden;">
                            <div
                                style="padding:15px; border-bottom:1px solid #334155; font-weight:bold; color:white; display:flex; justify-content:space-between; align-items:center;">
                                <span>الإشعارات</span>
                                <span style="font-size:0.8rem; color:#6366f1; cursor:pointer;">تحديد الكل كمقروء</span>
                            </div>
                            <div class="notif-list" style="max-height:350px; overflow-y:auto;">
                                <div style="padding:15px; text-align:center; color:#64748b;">جاري التحميل...</div>
                            </div>
                            <a href="notifications.html"
                                style="display:block; padding:12px; text-align:center; color:#6366f1; text-decoration:none; font-size:0.9rem; font-weight:600; background:#1e293b;">عرض
                                كل الإشعارات</a>
                        </div>
                    </div>

                    <!-- Profile Dropdown Trigger -->
                    <div class="profile-container" style="position:relative;">
                        <div class="profile-trigger" id="profile-widget-trigger"
                            style="display:flex; align-items:center; gap:12px; cursor:pointer; padding:5px; border-radius:8px; transition:background 0.2s;">
                            <div class="avatar"
                                style="width:40px; height:40px; background:linear-gradient(135deg, #6366f1, #8b5cf6); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:1.1rem; box-shadow:0 4px 6px -1px rgba(99, 102, 241, 0.3);">
                                <span id="user-avatar-char">T</span>
                            </div>
                            <div class="info mobile-hide" style="text-align:right;">
                                <div id="user-name" style="font-weight:bold; color:white; font-size:0.9rem;">المعلم
                                </div>
                                <div style="font-size:0.75rem; color:#94a3b8;">محاضر</div>
                            </div>
                            <i class="fas fa-chevron-down mobile-hide" style="font-size:0.8rem; color:#94a3b8;"></i>
                        </div>

                        <!-- Profile Dropdown Menu -->
                        <div class="custom-dropdown" id="profile-dropdown-menu"
                            style="display:none; position:absolute; left:0; top:60px; background:#1e293b; border:1px solid #334155; border-radius:12px; width:220px; z-index:1000; box-shadow:0 20px 25px -5px rgba(0,0,0,0.3); overflow:hidden;">
                            <a href="profile.html" class="dropdown-item"
                                style="display:flex; gap:10px; padding:12px 15px; color:#cbd5e1; text-decoration:none; border-bottom:1px solid #334155; align-items:center; transition:background 0.2s;">
                                <i class="fas fa-user-circle" style="width:20px; text-align:center;"></i> الحساب الشخصي
                            </a>
                            <a href="subscriptions.html" class="dropdown-item"
                                style="display:flex; gap:10px; padding:12px 15px; color:#cbd5e1; text-decoration:none; border-bottom:1px solid #334155; align-items:center; transition:background 0.2s;">
                                <i class="fas fa-box-open" style="width:20px; text-align:center;"></i> الاشتراكات
                            </a>
                            <a href="settings.html" class="dropdown-item"
                                style="display:flex; gap:10px; padding:12px 15px; color:#cbd5e1; text-decoration:none; border-bottom:1px solid #334155; align-items:center; transition:background 0.2s;">
                                <i class="fas fa-cog" style="width:20px; text-align:center;"></i> الإعدادات
                            </a>
                            <a href="#" id="logout-link-dropdown" class="dropdown-item"
                                style="display:flex; gap:10px; padding:12px 15px; color:#ef4444; text-decoration:none; align-items:center; transition:background 0.2s; font-weight:600;">
                                <i class="fas fa-power-off" style="width:20px; text-align:center;"></i> تسجيل الخروج
                            </a>
                        </div>
                    </div>

                </div>
            </header>



            <div class="page-content">

                <!-- Filters Bar -->
                <div class="filters-bar">
                    <div class="search-input-group">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-trainings" class="form-input" placeholder="بحث باسم الدورة...">
                    </div>

                    <button class="btn-action" onclick="window.location.href='create-training.html'"
                        style="background:var(--accent-color, #8b5cf6); color:white; border:none; padding:8px 20px; border-radius:6px; cursor:pointer; font-weight:bold; display:flex; align-items:center; gap:8px; transition:0.2s;">
                        <i class="fas fa-plus"></i> إضافة دورة
                    </button>

                    <div class="page-controls">
                        <span style="color:var(--text-muted); font-size:0.9rem;">عرض:</span>
                        <select class="form-input" style="padding: 5px 10px; width:auto;">
                            <option>10</option>
                            <option>25</option>
                            <option>50</option>
                        </select>
                    </div>
                </div>

                <!-- Data Table -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th width="5%">#</th>
                                <th width="40%">اسم الدورة التدريبية</th>
                                <th width="20%">المحاضر</th>
                                <th width="15%">نشر</th>
                                <th width="15%">تاريخ الإنشاء</th>
                                <th width="5%">الأوامر</th>
                            </tr>
                        </thead>
                        <tbody id="trainings-table-body">
                            <!-- Rows injected via JS -->
                        </tbody>
                    </table>
                    <div id="loading-indicator" class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i> جاري التحميل...
                    </div>
                    <div id="empty-state" class="empty-state" style="display: none; background:none; border:none;">
                        <p>لا توجد دورات تدريبية حالياً</p>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Row Template -->
    <template id="training-row-template">
        <tr>
            <td class="row-index">1</td>
            <td>
                <div class="col-main row-title">اسم الدورة</div>
                <!-- <div class="col-meta row-desc">وصف بسيط...</div> -->
            </td>
            <td class="col-meta row-instructor">د/ اسم المحاضر</td>
            <td>
                <span class="badge badge-purple row-status">منشور</span>
            </td>
            <td class="col-meta row-date">2025/01/01</td>
            <td>
                <div class="action-dropdown">
                    <button class="btn-icon-menu"><i class="fas fa-ellipsis-v"></i></button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item view-btn"><i class="fas fa-eye"></i> الوحدات / الابواب</button>
                        <button class="dropdown-item"><i class="fas fa-edit"></i> تعديل</button>
                        <button class="dropdown-item danger"><i class="fas fa-trash"></i> حذف</button>
                    </div>
                </div>
            </td>
        </tr>
    </template>

    <script type="module" src="../assets/js/firebase-config.js"></script>
    <script type="module" src="../assets/js/trainings.js"></script>
    <script type="module" src="../assets/js/dashboard.js"></script>
</body>

</html>