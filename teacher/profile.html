<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الملف الشخصي - Ta3leemy</title>

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="../assets/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div class="dashboard-layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header"><a href="#" class="logo">Ta3leemy</a></div>
            <div class="sidebar-menu">
                <div class="menu-item" onclick="window.location.href='dashboard.html'"><i class="fas fa-home"></i>
                    الرئيسية</div>
                <div class="menu-item" onclick="window.location.href='trainings.html'"><i
                        class="fas fa-layer-group"></i> الدورات</div>
                <div class="menu-item" onclick="window.location.href='courses.html'"><i class="fas fa-book"></i>
                    الكورسات</div>
                <div class="menu-item" onclick="window.location.href='students.html'"><i class="fas fa-users"></i>
                    الطلاب</div>
                <div class="menu-item active" onclick="window.location.href='profile.html'"><i
                        class="fas fa-user-cog"></i> الملف الشخصي</div>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div style="display:flex; align-items:center; gap:1rem;">
                    <button class="btn-icon mobile-only" id="open-sidebar"><i class="fas fa-bars"></i></button>
                    <h3>الملف الشخصي</h3>
                </div>
            </header>

            <div class="page-content">

                <div class="profile-layout">

                    <!-- Side Card -->
                    <div class="profile-card-side">
                        <div class="profile-img-container">
                            <img src="https://via.placeholder.com/150" id="profile-image-preview" class="profile-img"
                                alt="Profile">
                        </div>
                        <h3 id="side-name">...</h3>
                        <p id="side-role" style="color:var(--text-muted); font-size:0.9rem;">محاضر</p>

                        <input type="file" id="file-upload" hidden accept="image/*">
                        <button class="upload-btn" onclick="document.getElementById('file-upload').click()">
                            <i class="fas fa-camera"></i> تغيير الصورة
                        </button>

                        <div class="teacher-code-box">
                            <p style="margin:0 0 5px 0; font-size:0.8rem; color:var(--text-muted);">كود المحاضر</p>
                            <h2 style="margin:0; color:var(--accent-color); letter-spacing:2px;" id="teacher-code">---
                            </h2>
                        </div>
                    </div>

                    <!-- Main Form -->
                    <div class="auth-card" style="width:100%; border:none; padding:0;">
                        <h4
                            style="margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:1rem; color:var(--text-color);">
                            <i class="fas fa-id-card" style="color:#6366f1;"></i> البيانات الأساسية
                        </h4>
                        <form id="profile-form">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div class="form-group">
                                    <label
                                        style="color:#e2e8f0; font-weight:bold; margin-bottom:5px; display:block;">الاسم
                                        بالكامل <span style="color:red">*</span></label>
                                    <input type="text" id="full-name" class="form-input" required
                                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                                </div>

                                <div class="form-group">
                                    <label
                                        style="color:#e2e8f0; font-weight:bold; margin-bottom:5px; display:block;">اسم
                                        المنصة (يظهر للطلاب)</label>
                                    <input type="text" id="platform-name" class="form-input"
                                        placeholder="مثال: أكاديمية التفوق"
                                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                                </div>

                                <div class="form-group">
                                    <label
                                        style="color:#e2e8f0; font-weight:bold; margin-bottom:5px; display:block;">البريد
                                        الإلكتروني</label>
                                    <input type="email" id="email" class="form-input" disabled
                                        style="opacity:0.7; cursor:not-allowed; background:#1e293b; border:1px solid #334155; color:#94a3b8; padding:10px; border-radius:8px;">
                                </div>

                                <div class="form-group">
                                    <label
                                        style="color:#e2e8f0; font-weight:bold; margin-bottom:5px; display:block;">رقم
                                        الهاتف</label>
                                    <input type="tel" id="phone-display" class="form-input"
                                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                                </div>

                                <div class="form-group" style="grid-column: span 2;">
                                    <label
                                        style="color:#e2e8f0; font-weight:bold; margin-bottom:5px; display:block;">المواد
                                        الأساسية</label>
                                    <input type="text" id="subjects" class="form-input"
                                        placeholder="مثال: فيزياء، كيمياء"
                                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                                </div>
                            </div>

                            <div class="form-footer"
                                style="display: flex; gap: 1rem; justify-content: space-between; margin-top: 2rem; align-items: center;">
                                <button type="button" class="btn btn-secondary"
                                    onclick="alert('لتغيير البريد الإلكتروني يرجى التواصل مع الدعم الفني لضمان الأمان.')"
                                    style="color:#94a3b8; border-color:#94a3b8; background:transparent;">
                                    <i class="fas fa-envelope"></i> تغيير البريد الإلكتروني
                                </button>
                                <button type="submit" class="btn btn-primary" id="save-btn"
                                    style="padding: 12px 30px; font-weight: bold; font-size: 1rem;">
                                    <span id="btn-text">حفظ التغييرات</span>
                                    <i class="fas fa-spinner fa-spin" id="btn-loader" style="display: none;"></i>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Security Section -->
                    <div class="auth-card" style="width:100%; border:none; padding:0; margin-top:2rem;">
                        <h4
                            style="margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:1rem; color: #f87171;">
                            <i class="fas fa-lock"></i> الأمان وتغيير كلمة المرور
                        </h4>
                        <form id="password-form">
                            <div class="form-group">
                                <label style="color:#e2e8f0; margin-bottom:5px; display:block;">كلمة المرور
                                    الحالية</label>
                                <input type="password" id="current-password" class="form-input" placeholder="********"
                                    style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                            </div>
                            <div class="form-group">
                                <label style="color:#e2e8f0; margin-bottom:5px; display:block;">كلمة المرور
                                    الجديدة</label>
                                <input type="password" id="new-password" class="form-input" placeholder="********"
                                    style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px;">
                            </div>
                            <div class="form-footer"
                                style="display: flex; gap: 1rem; justify-content: space-between; margin-top: 1rem; align-items: center;">
                                <button type="button" id="forgot-pass-btn" class="btn btn-link"
                                    style="color:#f43f5e; text-decoration:none; font-size:0.9rem;">
                                    نسيت كلمة المرور؟
                                </button>
                                <button type="submit" class="btn btn-secondary" id="pass-btn"
                                    style="border:1px solid #ef4444; color:#ef4444; background:transparent; padding:10px 20px; border-radius:8px; cursor:pointer;">
                                    <span id="pass-btn-text">تحديث كلمة المرور</span>
                                    <i class="fas fa-spinner fa-spin" id="pass-btn-loader" style="display: none;"></i>
                                </button>
                            </div>
                        </form>
                    </div>

                </div>

            </div>
        </main>
    </div>

    <!-- Change Email Modal -->
    <div id="email-modal" class="modal-overlay"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; align-items:center; justify-content:center;">
        <div class="modal-card"
            style="background:#1e293b; padding:2rem; border-radius:16px; width:90%; max-width:400px; border:1px solid #334155;">
            <h4 style="color:white; margin-bottom:1.5rem; text-align:center;">تغيير البريد الإلكتروني</h4>
            <form id="change-email-form">
                <div class="form-group">
                    <label style="color:#cbd5e1; display:block; margin-bottom:5px;">البريد الإلكتروني الجديد</label>
                    <input type="email" id="new-email-input" class="form-input" required placeholder="name@example.com"
                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px; width:100%;">
                </div>
                <div class="form-group" style="margin-top:15px;">
                    <label style="color:#cbd5e1; display:block; margin-bottom:5px;">كلمة المرور الحالية (للتحقق)</label>
                    <input type="password" id="current-pass-email" class="form-input" required placeholder="********"
                        style="background:#0f172a; border:1px solid #334155; color:white; padding:10px; border-radius:8px; width:100%;">
                </div>

                <div style="margin-top:20px; display:flex; gap:10px;">
                    <button type="submit" class="btn btn-primary" style="flex:1;">حفظ</button>
                    <button type="button" class="btn btn-secondary"
                        onclick="document.getElementById('email-modal').style.display='none'"
                        style="background:transparent; border:1px solid #475569; color:#cbd5e1; flex:1;">إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="../assets/js/firebase-config.js"></script>
    <script type="module" src="../assets/js/profile.js"></script>
</body>

</html>