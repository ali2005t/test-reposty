<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>التقييمات - Ta3leemy</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header"><a href="#" class="logo">Ta3leemy</a></div>
            <div class="sidebar-menu">
                <div class="menu-item" onclick="window.location.href='dashboard.html'"><i class="fas fa-home"></i>
                    الرئيسية</div>
                <div class="menu-item" onclick="window.location.href='trainings.html'"><i
                        class="fas fa-layer-group"></i> الدورات</div>
                <div class="menu-item" onclick="window.location.href='lectures.html'"><i class="fas fa-video"></i>
                    المحاضرات</div>
                <div class="menu-item active" onclick="window.location.href='exams.html'"><i
                        class="fas fa-clipboard-check"></i> الامتحانات</div>
                <div class="menu-item" onclick="window.location.href='exam-results.html'"><i class="fas fa-poll"></i>
                    النتائج والتصحيح</div>
                <div class="menu-item" onclick="window.location.href='students.html'"><i class="fas fa-users"></i>
                    الطلاب</div>
                <div class="menu-item" onclick="window.location.href='generate-codes.html'"><i
                        class="fas fa-barcode"></i> الأكواد</div>
                <div class="menu-item" onclick="window.location.href='manual-access.html'"><i
                        class="fas fa-lock-open"></i> فتح المحتوى للطالب</div>

                <!-- Accounts Submenu -->
                <div class="menu-item" onclick="toggleSubmenu('accounts-submenu')"
                    style="display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
                    <span><i class="fas fa-wallet"></i> الحسابات</span>
                    <i class="fas fa-chevron-down" style="font-size:0.8rem;"></i>
                </div>
                <div id="accounts-submenu" style="display:none; background:rgba(0,0,0,0.2); padding-right:15px;">
                    <div class="menu-item" onclick="window.location.href='permissions.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-file-invoice-dollar"></i> الأذونات
                    </div>
                    <div class="menu-item" onclick="window.location.href='invoices.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-file-invoice"></i> الفواتير</div>
                    <div class="menu-item" onclick="window.location.href='subscriptions.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-box-open"></i> الاشتراكات</div>
                </div>

                <div class="menu-item" onclick="window.location.href='app-settings.html'">
                    <i class="fas fa-mobile-alt"></i> تجهيز التطبيق
                </div>

                <div class="menu-item" onclick="window.location.href='support.html'"><i class="fas fa-headset"></i>
                    الدعم الفني</div>

                <!-- Settings Submenu -->
                <div class="menu-item" onclick="toggleSubmenu('settings-submenu')"
                    style="margin-top:auto; border-top:1px solid rgba(255,255,255,0.05); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
                    <span><i class="fas fa-cog"></i> الإعدادات</span>
                    <i class="fas fa-chevron-down" style="font-size:0.8rem;"></i>
                </div>
                <div id="settings-submenu"
                    style="display:none; background:rgba(0,0,0,0.2); padding-right:15px; margin-bottom:1rem;">
                    <div class="menu-item" onclick="window.location.href='settings.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-sliders-h"></i> إعدادات المنصة</div>
                    <div class="menu-item" onclick="window.location.href='notifications.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-bell"></i> الإشعارات</div>
                    <div class="menu-item" onclick="window.location.href='profile.html'"
                        style="font-size:0.9rem; padding:10px;"><i class="fas fa-user-circle"></i> الملف الشخصي</div>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar-redesigned"
                style="display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; background: #0f172a; border-bottom: 1px solid #1e293b;">
                <div class="header-title">
                    <div style="display:flex; align-items:center; gap:1rem;">
                        <button class="btn-icon mobile-only" id="open-sidebar"><i class="fas fa-bars"></i></button>
                        <h3 style="margin:0; color:white; font-size:1.2rem;">التقييمات</h3>
                    </div>
                </div>

                <!-- Left: Actions (Profile/Link) -->
                <div class="top-actions" style="display:flex; align-items:center; gap:20px;">
                    <a href="#" class="action-link mobile-hide" target="_blank" id="site-link"
                        style="color:#94a3b8; text-decoration:none; display:flex; align-items:center; gap:5px; transition:color 0.2s;">
                        <i class="fas fa-external-link-alt"></i> <span class="mobile-hide">الموقع</span>
                    </a>

                    <div class="user-profile" style="display:flex; align-items:center; gap:10px;">
                        <span id="header-user-name" style="color:white; font-size:0.9rem;">المعلم</span>
                        <div class="avatar"
                            style="width:35px; height:35px; background:#6366f1; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white;">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <div class="page-content">
                <div class="action-bar" style="display:flex; justify-content:space-between; margin-bottom:20px;">
                    <div style="display:flex; gap:10px;">
                        <input type="text" id="search-exams" placeholder="بحث..." class="search-input"
                            style="padding:10px; border-radius:8px; border:1px solid #334155; background:#1e293b; color:white;">
                        <button class="btn btn-secondary"><i class="fas fa-filter"></i> تصفية</button>
                    </div>
                    <button class="btn btn-primary" onclick="window.location.href='create-exam.html'">
                        <i class="fas fa-plus"></i> إضافة تقييم
                    </button>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>اسم التقييم</th>
                                    <th>المحاضر</th>
                                    <th>تاريخ الانشاء</th>
                                    <th>تاريخ البدايه</th>
                                    <th>تاريخ النهايه</th>
                                    <th>الدورة التدريبية</th>
                                    <th>الدرجة</th>
                                    <th>النجاح</th>
                                    <th>الاسئلة</th>
                                    <th>نشر</th>
                                    <th>الأوامر</th>
                                </tr>
                            </thead>
                            <tbody id="exams-table-body">
                                <!-- JS Rendered -->
                            </tbody>
                        </table>
                        <div id="loading-indicator" class="loading-state"><i class="fas fa-spinner fa-spin"></i> جاري
                            التحميل...</div>
                        <div id="empty-state" class="empty-state" style="display: none;">
                            <p>لا توجد تقييمات مضافة.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <template id="exam-row-template">
        <tr>
            <td class="row-index"></td>
            <td class="row-title" style="font-weight:bold;"></td>
            <td class="row-teacher"></td>
            <td class="row-created"></td>
            <td class="row-start"></td>
            <td class="row-end"></td>
            <td class="row-training"></td>
            <td class="row-score"></td>
            <td class="row-pass"></td>
            <td class="row-questions"></td>
            <td>
                <label class="switch">
                    <input type="checkbox" class="row-publish">
                    <span class="slider round"></span>
                </label>
            </td>
            <td>
                <div class="action-dropdown">
                    <button class="btn-icon-menu"><i class="fas fa-ellipsis-v"></i></button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item edit-btn"><i class="fas fa-edit"></i> تعديل</button>
                        <button class="dropdown-item questions-btn"><i class="fas fa-list-ol"></i> الأسئلة</button>
                        <button class="dropdown-item danger delete-btn"><i class="fas fa-trash"></i> حذف</button>
                    </div>
                </div>
            </td>
        </tr>
    </template>

    <script type="module" src="../assets/js/firebase-config.js"></script>
    <script type="module" src="../assets/js/dashboard.js"></script>
    <script src="../assets/js/ui-manager.js"></script>
    <script type="module" src="../assets/js/exams.js"></script>
</body>

</html>